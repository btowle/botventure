#!/usr/bin/env ruby
$LOAD_PATH.unshift(File.dirname(__FILE__))
$LOAD_PATH.unshift(File.dirname(__FILE__) + "/../../lib/ruby")
$LOAD_PATH.unshift(File.dirname(__FILE__) + "/../data")

require 'botventure/botventure'

server = Botventure::GameServer.new
server.start

require 'samplebot.rb' if ARGV.length == 0
#require 'player.rb' if ARGV.length == 0
require ARGV[0] if ARGV.length == 1

player = Player.new

bot = Botventure::Robot.new
bot.connect

while bot.is_connected? && bot.is_playing? do
  break if server.disconnected?
  player.do_turn(bot)
end

puts "Turn: #{bot.turn}"
if bot.is_winner? then
  puts "You win!"
else
  puts "You lose!"
end

server.stop
